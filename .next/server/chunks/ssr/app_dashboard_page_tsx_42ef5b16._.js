module.exports=[20731,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(5522),e=a.i(70106);let f=(0,e.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),g=(0,e.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);function h(){let[a,e]=(0,c.useState)(["Audi","BMW","Mercedes","Porsche","Lamborghini"]);return(0,b.jsx)("div",{className:"w-full lg:w-64 flex-shrink-0 space-y-6",children:(0,b.jsxs)("div",{className:"glass p-6 rounded-xl space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-primary font-semibold",children:[(0,b.jsx)(g,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Filters"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("label",{className:"text-xs uppercase text-muted-foreground font-medium tracking-wider",children:"Search"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(d.Input,{placeholder:"Model, Brand...",className:"pl-9"})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("label",{className:"text-xs uppercase text-muted-foreground font-medium tracking-wider",children:"Brands"}),(0,b.jsx)("div",{className:"flex flex-col gap-2",children:a.map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer group",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded border border-white/20 flex items-center justify-center group-hover:border-primary/50 transition-colors"}),(0,b.jsx)("span",{className:"text-sm group-hover:text-white transition-colors text-white/70",children:a})]},a))})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("label",{className:"text-xs uppercase text-muted-foreground font-medium tracking-wider",children:"Price Range"}),(0,b.jsx)("div",{className:"h-1 w-full bg-white/10 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-primary w-1/2 rounded-full"})}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:"€0"}),(0,b.jsx)("span",{children:"€50k+"})]})]})]})})}var i=a.i(40695),j=a.i(46271);let k=(0,e.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),l=(0,e.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),m=(0,e.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),n=(0,e.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),o=(0,e.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var p=a.i(86723),q=a.i(74290),r=a.i(1703),s=a.i(14800),t=a.i(91128),u=c,v=a.i(65802);function w(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class x extends u.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=b.offsetParent,c=(0,t.isHTMLElement)(a)&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=b.offsetHeight||0,d.width=b.offsetWidth||0,d.top=b.offsetTop,d.left=b.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function y({children:a,isPresent:d,anchorX:e,root:f}){let g=(0,u.useId)(),h=(0,u.useRef)(null),i=(0,u.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:j}=(0,u.useContext)(v.MotionConfigContext),k=function(...a){return c.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=w(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():w(a[b],null)}}}}(...a),a)}(h,a.props?.ref??a?.ref);return(0,u.useInsertionEffect)(()=>{let{width:a,height:b,top:c,left:k,right:l}=i.current;if(d||!h.current||!a||!b)return;let m="left"===e?`left: ${k}`:`right: ${l}`;h.current.dataset.motionPopId=g;let n=document.createElement("style");j&&(n.nonce=j);let o=f??document.head;return o.appendChild(n),n.sheet&&n.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            ${m}px !important;
            top: ${c}px !important;
          }
        `),()=>{o.contains(n)&&o.removeChild(n)}},[d]),(0,b.jsx)(x,{isPresent:d,childRef:h,sizeRef:i,children:u.cloneElement(a,{ref:k})})}let z=({children:a,initial:d,isPresent:e,onExitComplete:f,custom:g,presenceAffectsLayout:h,mode:i,anchorX:j,root:k})=>{let l=(0,q.useConstant)(A),m=(0,c.useId)(),n=!0,o=(0,c.useMemo)(()=>(n=!1,{id:m,initial:d,isPresent:e,custom:g,onExitComplete:a=>{for(let b of(l.set(a,!0),l.values()))if(!b)return;f&&f()},register:a=>(l.set(a,!1),()=>l.delete(a))}),[e,l,f]);return h&&n&&(o={...o}),(0,c.useMemo)(()=>{l.forEach((a,b)=>l.set(b,!1))},[e]),c.useEffect(()=>{e||l.size||!f||f()},[e]),"popLayout"===i&&(a=(0,b.jsx)(y,{isPresent:e,anchorX:j,root:k,children:a})),(0,b.jsx)(s.PresenceContext.Provider,{value:o,children:a})};function A(){return new Map}var B=a.i(20410);let C=a=>a.key||"";function D(a){let b=[];return c.Children.forEach(a,a=>{(0,c.isValidElement)(a)&&b.push(a)}),b}let E=({children:a,custom:d,initial:e=!0,onExitComplete:f,presenceAffectsLayout:g=!0,mode:h="sync",propagate:i=!1,anchorX:j="left",root:k})=>{let[l,m]=(0,B.usePresence)(i),n=(0,c.useMemo)(()=>D(a),[a]),o=i&&!l?[]:n.map(C),s=(0,c.useRef)(!0),t=(0,c.useRef)(n),u=(0,q.useConstant)(()=>new Map),v=(0,c.useRef)(new Set),[w,x]=(0,c.useState)(n),[y,A]=(0,c.useState)(n);(0,r.useIsomorphicLayoutEffect)(()=>{s.current=!1,t.current=n;for(let a=0;a<y.length;a++){let b=C(y[a]);o.includes(b)?(u.delete(b),v.current.delete(b)):!0!==u.get(b)&&u.set(b,!1)}},[y,o.length,o.join("-")]);let E=[];if(n!==w){let a=[...n];for(let b=0;b<y.length;b++){let c=y[b],d=C(c);o.includes(d)||(a.splice(b,0,c),E.push(c))}return"wait"===h&&E.length&&(a=E),A(D(a)),x(n),null}let{forceRender:F}=(0,c.useContext)(p.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:y.map(a=>{let c=C(a),p=(!i||!!l)&&(n===y||o.includes(c));return(0,b.jsx)(z,{isPresent:p,initial:(!s.current||!!e)&&void 0,custom:d,presenceAffectsLayout:g,mode:h,root:k,onExitComplete:p?void 0:()=>{if(v.current.has(c)||(v.current.add(c),!u.has(c)))return;u.set(c,!0);let a=!0;u.forEach(b=>{b||(a=!1)}),a&&(F?.(),A(t.current),i&&m?.(),f&&f())},anchorX:j,children:a},c)})})};function F({isOpen:a,onClose:e,leadTitle:f,leadId:g}){let[h,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1),n=async a=>{a.preventDefault(),m(!0),console.log(`Submitting offer of ${h} for ${g}`),await new Promise(a=>setTimeout(a,1e3)),m(!1),e(),k("")};return(0,b.jsx)(E,{children:a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50"}),(0,b.jsx)(j.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:(0,b.jsxs)("div",{className:"glass p-6 rounded-xl w-full max-w-sm pointer-events-auto relative border border-white/10 shadow-2xl",children:[(0,b.jsx)("button",{onClick:e,className:"absolute top-4 right-4 text-muted-foreground hover:text-white transition-colors",children:(0,b.jsx)(o,{className:"w-4 h-4"})}),(0,b.jsx)("h2",{className:"text-xl font-bold mb-1",children:"Make an Offer"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mb-6",children:["Propose a price for ",(0,b.jsx)("span",{className:"text-white font-medium",children:f})]}),(0,b.jsxs)("form",{onSubmit:n,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs uppercase text-muted-foreground font-medium tracking-wider",children:"Your Offer (€)"}),(0,b.jsx)(d.Input,{type:"number",placeholder:"e.g. 45000",value:h,onChange:a=>k(a.target.value),required:!0,className:"h-11",min:0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,b.jsx)(i.Button,{type:"button",variant:"ghost",onClick:e,className:"w-full",children:"Cancel"}),(0,b.jsx)(i.Button,{type:"submit",variant:"gold",className:"w-full",disabled:l,children:l?"Sending...":"Submit Offer"})]})]})]})})]})})}var G=a.i(7291);function H({lead:a}){let[d,e]=(0,c.useState)(!1),[f,g]=(0,c.useState)(!1),h=async()=>{if(confirm(`Confirm Exclusive Buy for €${a.price_exclusive}? This will remove it for everyone else.`)){g(!0);try{let{error:b}=await G.supabase.from("leads").update({status:"sold_exclusive"}).eq("id",a.id);b&&(console.error("Error buying exclusive:",b),alert("Failed to purchase. It may have been sold."))}catch(a){console.error(a)}finally{g(!1)}}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(j.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"glass-card p-0 flex flex-col justify-between h-full group relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-primary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"inline-block px-2 py-1 bg-white/5 border border-white/10 rounded text-[10px] uppercase tracking-widest text-muted-foreground mb-2",children:a.brand}),(0,b.jsx)("h3",{className:"text-lg font-bold text-white group-hover:text-primary transition-colors",children:a.title})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsx)(l,{className:"w-5 h-5 text-primary opacity-50"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-4 border-y border-white/5",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,b.jsx)(n,{className:"w-3 h-3"})," Mileage"]}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[a.mileage.toLocaleString()," km"]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,b.jsx)(m,{className:"w-3 h-3"})," Registration"]}),(0,b.jsx)("span",{className:"text-sm font-medium",children:new Date(a.registration_date).getFullYear()})]})]}),(0,b.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,b.jsxs)("div",{onClick:()=>{alert(`Standard buy initiated for €${a.price_standard}. You would be redirected to stripe/checkout.`)},className:"flex items-center justify-between group/std p-2 rounded-lg hover:bg-white/5 transition-colors cursor-pointer border border-transparent hover:border-white/5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-muted-foreground group-hover/std:text-white transition-colors",children:"1"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Standard Buy"}),(0,b.jsxs)("span",{className:"font-semibold text-white",children:["€",a.price_standard]})]})]}),(0,b.jsx)(i.Button,{size:"sm",variant:"outline",className:"opacity-0 group-hover/std:opacity-100 transition-opacity",children:"Buy"})]}),(0,b.jsxs)("div",{onClick:h,className:"flex items-center justify-between group/excl p-2 rounded-lg bg-primary/5 border border-primary/10 hover:border-primary/50 transition-colors cursor-pointer relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-primary/5 to-transparent -translate-x-full group-hover/excl:animate-shimmer"}),(0,b.jsxs)("div",{className:"flex items-center gap-3 relative z-10",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary",children:(0,b.jsx)(k,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-primary font-medium tracking-wide",children:"EXCLUSIVE"}),(0,b.jsxs)("span",{className:"font-bold text-white",children:["€",a.price_exclusive]})]})]}),(0,b.jsx)(i.Button,{size:"sm",variant:"gold",className:"relative z-10",disabled:f,children:f?"Processing...":"Buy Exclusive"})]})]})]}),(0,b.jsx)("div",{className:"p-4 bg-white/3 border-t border-white/5 text-center",children:(0,b.jsx)("button",{onClick:()=>e(!0),className:"text-xs text-muted-foreground hover:text-white transition-colors underline-offset-4 hover:underline",children:"Make an offer"})})]}),(0,b.jsx)(F,{isOpen:d,onClose:()=>e(!1),leadTitle:a.title,leadId:a.id})]})}let I=[{id:"1",title:"Audi RS6 Avant",brand:"Audi",mileage:12e3,registration_date:"2023-05-01",price_standard:500,price_exclusive:5e3,status:"available"},{id:"2",title:"Mercedes G63 AMG",brand:"Mercedes",mileage:5e3,registration_date:"2024-01-15",price_standard:800,price_exclusive:8e3,status:"available"},{id:"3",title:"Porsche 911 GT3",brand:"Porsche",mileage:2500,registration_date:"2023-11-20",price_standard:1e3,price_exclusive:1e4,status:"available"},{id:"4",title:"Lamborghini Urus",brand:"Lamborghini",mileage:8500,registration_date:"2022-08-10",price_standard:1200,price_exclusive:12e3,status:"available"}];function J(){let[a,d]=(0,c.useState)(I);return(0,c.useEffect)(()=>{(async()=>{let{data:a}=await G.supabase.from("leads").select("*").eq("status","available");a&&a.length>0&&d(a)})();let a=G.supabase.channel("leads-changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"leads"},a=>{"sold_exclusive"===a.new.status&&d(b=>b.filter(b=>b.id!==a.new.id))}).subscribe();return()=>{G.supabase.removeChannel(a)}},[]),(0,b.jsx)("div",{className:"min-h-screen pt-20 pb-10 px-4 md:px-8 max-w-[1600px] mx-auto",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,b.jsx)(h,{}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"mb-6 flex items-center justify-between",children:(0,b.jsxs)("h2",{className:"text-2xl font-semibold tracking-tight",children:["Marketplace ",(0,b.jsxs)("span",{className:"text-muted-foreground text-sm font-normal ml-2",children:[a.length," Active Leads"]})]})}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:a.map(a=>(0,b.jsx)(H,{lead:a},a.id))})]})]})})}a.s(["default",()=>J],20731)}];

//# sourceMappingURL=app_dashboard_page_tsx_42ef5b16._.js.map